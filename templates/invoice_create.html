{% extends "base.html" %}

{% block title %}Create Invoice{% endblock %}

{% block content %}
<div class="page-title-container">
  <h1 class="page-title">💰 {% if is_duplicate %}Duplicate{% else %}New{% endif %} Invoice</h1>
  <div class="title-nav-buttons">
    <a href="/invoices" class="btn-base btn-outline-accent">← Back</a>
  </div>
</div>

{% if is_duplicate %}
<div class="card-base" style="background-color: rgba(0, 160, 126, 0.1); border-left: 4px solid var(--teal); margin-bottom: 1.5rem;">
  <div class="d-flex align-items-center">
    <div class="me-3" style="font-size: 24px;">📋</div>
    <div>
      <h5 class="mb-1">Duplicating Invoice</h5>
      <p class="mb-0 text-muted">{{ duplicate_from.invoice_number }} for {{ duplicate_from.client_name }}</p>
    </div>
  </div>
</div>
{% endif %}

<div class="card-base" style="max-width: 600px; margin: 0 auto;">
  <form method="POST" action="/invoices/create" id="invoiceForm">
    
    <!-- Client Details -->
    <div class="mb-4">
      <label class="form-label">Client Name *</label>
      <input type="text" name="client_name" class="input-base input-wide" 
             placeholder="Enter client name" 
             value="{{ duplicate_from.client_name if duplicate_from else '' }}" 
             required autofocus>
    </div>
    
    <!-- Service Description -->
    <div class="mb-4">
      <label class="form-label">Service Description *</label>
      <input type="text" name="description" class="input-base input-wide" 
             placeholder="e.g. Tennis Lessons (4 sessions)" 
             value="{{ duplicate_from.description if duplicate_from else '' }}" 
             required>
    </div>
    
    <!-- Amount & Due Date Row -->
    <div class="row g-3 mb-4">
      <div class="col-sm-6">
        <label class="form-label">Amount (£) *</label>
        <input type="number" name="amount" class="input-base" 
               placeholder="0.00" step="0.01" min="0" 
               value="{{ duplicate_from.amount if duplicate_from else '' }}" 
               required>
      </div>
      <div class="col-sm-6">
        <label class="form-label">Due Date *</label>
        <input type="date" name="due_date" class="input-base" 
               value="{{ due_date }}" required>
      </div>
    </div>
    
    <!-- Notes -->
    <div class="mb-4">
      <label class="form-label">Payment Notes (optional)</label>
      <textarea name="notes" class="input-base input-wide" rows="3" 
                placeholder="e.g. Bank transfer preferred, Net 7 days"
                >{{ duplicate_from.notes if duplicate_from else '' }}</textarea>
    </div>
    
    <!-- Create Button -->
    <div class="text-center">
      <button type="submit" class="btn-base btn-accent btn-lg w-100 w-sm-auto">
        {% if is_duplicate %}🔄 Create Duplicate{% else %}✅ Create Invoice{% endif %}
      </button>
      <p class="text-muted mt-2 mb-0 small">Invoice will be numbered automatically</p>
    </div>
    
  </form>
</div>
{% endblock %}